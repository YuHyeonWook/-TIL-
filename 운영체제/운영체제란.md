# 운영체제란

- 운영체제란 **실행할 프로그램에 필요한 자원을 할당하고, 프로그램이 올바르게 실행되도록 돕는 특별한 프로그램**이다.
- 위에서 말한 **자원**이란 프로그램 실행에 필요한 요소들을 가리키는 시스템 자원을 줄여서 **자원**이라고 한다.
- 운영체제는 커널 영역에서 적재된다.

## 운영체제의 영역

- 커널 영역(kernel space) : 컴퓨터가 부팅될 때 메모리 내 **커널영역 공간에 따로 적재되어 실행되는 영역**이다.
- 사용자 영역(user space) : 커널영역을 제외한 나머지 영역, 사용자가 이용하는 응용프로그램이 적재되는 영역이다.
- 즉, 운영체제는 커널 영역에 적재되어 사용자 영역에 적재된 프로그램들에 자원을 할당하고 이들이 올바르게 실행되도록 돕는 것이다.

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/e3ed4d70-a368-4e0d-b0f3-529ca7a99de0)

## 운영체제의 역할

- 예를 들어 워드 프로세서, 인터넷 브라우저, 메모장을 실행 중이면 최소 세 개의 응용 프로그램이 사용자 영역에 적재된다.

\*응용프로그램(application software)은 사용자가 특정 목적을 위해 사용하는 일반적인 프로그램을 의미한다. 워드 프로세서, 인터넷 브라우저, 메모장, 게임 등과 같은 프로그램이 모두 응용 프로그램이다.

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/dce360ba-e455-41dd-9932-8ae702899fa8)

- 워드 프로세서, 인터넷 브라우저, 메모장은 각각 번지에 적재되어 있다. 메모리 주소가 겹치지 않도록 각 공간에 프로그램들을 적재해 준 것은 운영체제가 한 역할이다.
- 운영체제는 실행할 프로그램을 메모리에 적재하고, 더 이상 실행되지 않는 프로그램을 메모리에서 삭제하며 지속적으로 메모리 자원을 관리한다.

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/5be2dd8a-4086-43c9-be54-979072807cc9)

또한, 세 개의 응용프로그램이 실행되려면 반드시 CPU가 필요하다.

<aside>
💡 운영체제는 응용 프로그램과 하드웨어 사이에서 응용 프로그램에 필요한 자원을 할당하고, 사용자가 실행하는 응용프로그램이 올바르게 실행되도록 관리하는 역할을 한다.

</aside>

## 운영체제의 심장 커널이란

- 커널이란 운영체제의 핵심 서비스를 담당한다. 이는 자원에 접근하고 조작하는 기능, 프로그램이 올바르고 안전하게 실행되게 하는 기능이 운영체제의 핵심 서비스에 속한다.
- 운영체제가 설치된 모든 기기에는 커널이 있다. 커널은 마치 사람의 심장 혹은 자동차의 엔진과 같다고 표현할 수 있다.
  - ※ 어떤 커널을 사용하는지에 따라 실행하고 개발하는 프로그램이 하드웨어를 이용하는 양상이 달라지고, 컴퓨터 전체의 성능도 달라질 수 있다.

### 운영체제가 제공하는 서비스 중 커널에 포함되지 않는 서비스

- 사용자 인터페이스(UI) : 윈도우의 바탕화면과 같이 사용자가 컴퓨터와 상호작용할 수 있는 통로이다.
- 운영체제가 제공하는 사용자 인터페이스의 종류로는 그래픽 유저 인터페이스(GUI)와 커맨드 라인 인터페이스(CLI)가 있다.
  - GUI는 화면처럼 그래픽을 기반으로 컴퓨터와 상호작용할 수 있는 인터페이스이고, CLI는 명령어를 기반으로 컴퓨터와 상호작용할 수 있는 인터페이스이다.

## 이중 모드와 시스템 호출

- 운영체제는 **사용자가 실행하는 응용 프로그램이 하드웨어 자원에 직접 접근하는 것을 방지하여 자원을 보호**한다.
  - 만약 응용 프로그램이 CPU, 메모리, 하드 디스크 등에 마음대로 접근하고 조작할 수 있다면 자원이 무질서하게 관리될 것이고, 응용 프로그램이 조금만 실수해도 컴퓨터 전체에 큰 악영향을 끼친다.

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/a636a09d-8c3d-4587-bce5-3426d2c0ed1c)

- 그래서 운영체제는 응용 프로그램들이 자원에 접근하려고 할 때 오직 자신을 통해서만 접근하도록 하여 자원을 보호한다. 비유하자면 운영체제는 응용 프로그램의 자원 접근을 대행하는 문지기 역할을 하는 셈이다. 즉, **응용 프로그램이 자원에 접근하기 위해서는 운영체제에 도움을 요청**해야 한다.

이러한 운영체제의 문지기 역할은 이중 모드로 구현된다.

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/4c892905-2efc-4570-9480-e456a69a403d)

- 이중모드: CPU가 명령어를 실행하는 모드를 사용자 모드와 커널 모드로 구분하는 방식이다. CPU는 명령어를 사용자 모드로써 실행할 수 있고, 커널모드로써 실행할 수 있다.
- 사용자 모드: 운영체제 서비스를 제공받을 수 없는 실행모드이다. 즉, 커널 영역의 코드를 실행할 수 없는 모드이다. 일반적인 응용 프로그램은 기본적으로 사용자 모드로 실행된다.
- 커널 모드: 운영체제 서비스를 제공받을 수 있는 실행 모드이다. 즉, 커널 영역의 코드를 실행할 수 있는 모드이다.

<br>

- 시스템 호출: 운영체제 서비스를 제공받기 위해 커널 모드로 전환하는 방법이다. 또한, 시스템 호출은 **소프트웨어적인 인터럽트** 라고 할 수 있다.

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/6ab08d15-6089-4115-90f0-a4fee159d919)

- 인터럽트는 입출력장치에 의해 발생하기도 하지만 인터럽트를 발생시키는 특정 명령어에 의해 발생하기도 한다. 이를 **소프트웨어 인터럽트** 라고 한다.

## 운영체제의 핵심 서비스

### 1) 프로세스 관리

- 실행 중인 프로그램을 프로세스(process)라고 한다.
- 일반적으로 하나의 cpu는 한 번에 하나의 프로세스만 실행할 수 있기에 cpu는 한 프로세스를 실행하다가 다른 프로세스로 실행을 전환하고, 그 프로세스를 실행하다가 또 다른 프로세스로 실행을 전환하는 것을 반복한다.

### 2) 자원 접근 및 할당

CPU

- 일반적으로 메모리에는 여러 프로세스가 적재되고, 하나의 cpu는 한 번에 하나의 프로세스만 실핼할 수 있어 하나의 프로세스가 cpu를 이용하고 있다면 다른 프로세스는 기다려야한다.
- 이에 운영체제는 프로세스들에 공정하게 cpu를 할당하기 위해 어떤 프로세스부터 cpu를 이용하게 할 것인지, 얼마나 오래 cpu를 이용하게 할지를 결정할 수 있어야 한다. 이것은 **cpu 스케줄링**이라고 한다.

또한 자원 접근 및 할당에는 메모리, 입출력 장치에 대한 개념이 있어 뒤에서 다루어 보겠다.

### 3) 파일 시스템 관리

- 파일들을 묶어 디렉터리(폴더)로 관리한다. 이에 파일 시스템도 운영체제가 지원하는 핵심 서비스이다.

<br>

# 참고

- 혼자 공부하는 컴퓨터구조 + 운영체제
