# 도커

도커란 무엇인가요?

- 데이터 또는 프로그램을 격리시키는 기능을 제공한다.
- 주로 서버에서 사용된다. 클라이언트 컴퓨터에서도 사용할 수는 있지만 현 시점 서버에서 사용하는 것이 주 용도이다.

도커를 사용하려면 도커 소프트웨어의 본체인 도커 엔진을 설치해야하고 도커 이미지도 필요하다.그리고 도커 엔진을 사용해 컨테이너를 생성하고 구동시킬 수 있다.

도커는 리눅스 컴퓨터에서 사용한다. 즉, 컨테이너에서 동작시킬 프로그램도 리눅스용 프로그램이다.

---

서버란 무엇일까요?

- 어떤 서비스(service)를 제공(serve)하는 것을 말한다.

도커와 AWS EC2의 차이는 무엇인가요?

- AWS EC2에도 도커의 컨테이너와 비슷한 ‘인스턴스’라는 개념이 있다.
  EC2 역시 가상화 기술이다. 다시 말해 각각의 인스턴스가 완전히 독립된 컴퓨터처럼 동작한다. 따라서 EC2와 도커의 관계는 VirtualBox나 VMware의 도커의 관계와 같다.
  다만 인스턴스는 컨테이너와 마찬가지로 AMI라는 이미지로부터 생성하므로 인스턴스를 배포하는 방법을 도커와 비슷한다.

도커의 구조는?

- 일반적인 서버라면 운영체제 위에 프로그램이나 데이터가 직접 올라가겠지만 도커를 사용하는 경우 운영체제 위에 도커 엔진이 동작하고 그 위에서 컨테이너가 동작한다.

도커 컨테이너의 구조는?

- 모든 컨테이너에는 ‘리눅스 운영체제 비슷한 무언가’가 들어 있다.
- 술집에서 아무것도 주문하지 않아도 기본 안주가 나오듯, 최소한의 컨테이너에도 ‘리눅스 운영체제 비슷한 무언가’가 딸려 나온다.
  ‘빈 컨테이너’라고 했지만 정말로 텅 빈 것은 아닌 셈이다.

운영체제가 하는 일은 무엇일까요?

- 운영체제는 소프트웨어나 프로그램의 명령을 하드웨어에 전달하는 역할이다.

---

### 도커 이미지와 컨테이너

컨테이너를 생성하려면 먼저 이미지를 만들어야 한다. 이미지는 컨테이너를 찍어내는 ‘빵틀’과 같은 것으로, 컨테이너의 설계도 역할을 한다. EX. 로봇 장난감을 찍어내는 금형과 같다.
도커 이미지는 컨테이너를 만드는 데 사용한다. 이미지는 금형과 같은 역할을 하는 것으로, 하나만 있으면 똑같은 것을 여러 개 만들 수 있다.
하지만 이미지로만 컨테이너를 만들 수 있는 것이 아니라 컨테이너로도 이미지를 만들 수 있다. 컨테이너로 이미지를 만드는 것은 이미 만든 컨테이너에 손을 대서 컨테이너의 금형을 새로이 만드는 과정이다.
컨테이너로부터 이미지를 만들 수 없었다면 여러 개의 컨테이너를 일일이 수정할 수밖에 없었을 것이다. 매우 번거롭다.

도커 허브란 무엇인가요?

- 공개된 컨테이너 이미지가 모여 있는 곳이다. 도커 허브에서 원하는 컨테이너의 이미지를 내려받을 수 있다.

도커 생애주기란 무엇인가요?

- 도커 컨테이너는 ‘쓰고 버리는’ 일회용품 같은 것이다.
- 컨테이너는 쉽게 만들 수 있어 컨테이너 하나를 업데이트하면서 계속 사용하기보다는 업데이트된 소프트웨어가 들어있는 새로운 컨테이너를 사용하는 것이 좋다. **즉, 새로운 버전이 나오면 새로운 컨테이너로 갈아타는 것이다.**
- 이렇듯 컨테이너를 ‘만들고’, ‘실행하고’, ‘종료하고’, ‘폐기한’ 다음, 다시 컨테이너를 ‘만드는’ 일련의 과정을 ‘컨테이너의 생애주기’라고 부른다
- 컨테이너를 폐기했다면 컨테이너에 들어있던 데이터(파일)은 사라진다.

도커의 특징은 무엇이 있을까요?

### 독립된 환경

- 독립된 환경 덕분에 ‘여러 개의 컨테이너를 띄울 수’ 있으며, ‘똑같은 애플리케이션도 여러 개 띄울 수’ 있다.
- 그 중 일부를 교체하거나 수정할 수도 있다.

### 이미지를 만들 수 있다.

- 만든 이미지를 ‘도커 허브에서 배포’할 수 있다.
- 모든 이미지를 스스로 처음부터 만들지 않아도 ‘이미지를 내려받기만 하면’ 컨테이너를 사용할 수 있다. 또 구축 작업이 간단해지므로 ‘교체가 쉽고’, ‘업데이트가 쉬운’ 장점도 있다.
- 이미지를 만들 수 있다는 특징은 이동성이 좋다는 특징으로도 이어진다. ‘똑같은 컨테이너를 쉽게 만들 수 있으므로’, ‘환경 이동’이나 ‘개발환경을 구축’하기도 쉽다.

### 컨테이너에 ‘커널을 포함시킬 필요가 없다’

- 컨테이너에는 커널(운영체제의 핵심이 되는 부분)을 포함시킬 필요가 없으므로 가볍다. 또 배포판도 원하는 것을 사용할 수 있다.
-
- 도커의 장점과 단점은 무엇인가요?
  ### 장점:
  1. 한 대의 물리 서버에 여러 대의 서버를 띄울 수 있다.
  2. 서버 관리가 용이하다.
  3. 서버 고수가 아니어도 다루기 수비다.
  ### 단점:
  1. 리눅스용 소프트웨어밖에 지원하지 않는다.
  2. 물리 서버 한 대에 여러 대의 서버를 띄우는 형태이므로 호스트 서버에 문제가 생기면 모든 컨테이너에 영향이 미친다.

아파치란 무엇인가요?

- 웹 서버 기능을 제공하는 소프트웨어이다.
  볼륨이란 무엇인가요?
- 스토리지의 한 영역을 분할 한 것을 말한다.
- 간단히 말하면 하드디스크나 SSD를 분할한 하나의 영역이다. 기다란 카스테라를 자른 한 조각이라고 이해하면 쉽다.
  마운트란 무엇인가요?
- “연결하다”라는 의미 그대로 대상을 연결해 운영체제 또는 소프트웨어의 관리하에 두는 일을 말한다.
  EX. USB메모리를 컴퓨터에 꽂으면 띠딩, 하는 소리가 난 다음 폴더가 열리는데, 이것도 USB 메모리가 컴퓨터에 마운트됐기 때문이다.

볼륨 마운트란 무엇인가요?

- 도커 엔진이 관리하는 영역 내에 만들어진 볼륨을 컨테이너에 디스크 형태로 마운트한다.

## 스토리지 마운트의 종류

---

### 볼륨 마운트

- 볼륨 마운트는 도커 엔진이 관리하는 영역 내에 만들어진 볼륨을 컨테이너에 디스크 형태로 마운트한다.
- 이름만으로 관리가 가능하므로 다루기 쉽지만 볼륨에 비해 직접 조작하기 어려우므로 ‘임시 목적의 사용’이나 ‘자주 쓰지는 않지만 지우면 안되는 파일’을 두는 목적으로 많이 사용한다.

### 바인드 마운트

- 바인드 마운트는 도커가 설치된 컴퓨터의 문서 폴더 또는 바탕화면 폴더 등 도커 엔진에서 관리하지 않는 영역의 기존 디렉터리를 컨테이너에 마운트하는 방식이다. 디렉터리가 아닌 파일 단위로도 마운트가 가능하다.
- 폴더(디렉터리) 속에 파일을 직접 두거나 열어볼 수 있기 때문에 자주 사용하는 파일을 두는 데 사용한다.

| 항목          | 볼륨 마운트             | 바인드 마운트                |
| ------------- | ----------------------- | ---------------------------- |
| 스토리지 영역 | 볼륨                    | 디렉터리 또는 파일           |
| 물리적 위치   | 도커 엔진의 관리 영역   | 어디든지 가능                |
| 마운트 절차   | 볼륨을 생성한 후 마운트 | 기존 파일 또는 폴더를 마운트 |
| 내용 편집     | 도커 컨테이너를 통해서  | 일반적인 파일과 같이         |
| 백업          | 절차가 복잡함           | 일반적인 파일과 같이         |

- 도커 파일이란 무엇인가요?
  도커 이미지를 만들기 위한 설정 파일이며, 컨테이너가 어떻게 행동해야 하는지에 대한 설정들을 정의해주는 곳이다.
- 도커 컴포즈란 무엇인가요?
  시스템 구축과 관련된 명령어를 하나의 텍스트 파일(정의 파일)에 기재해 명령어 한번에 시스템 전체를 실행하고 종료와 폐기까지 한번에 하도록 도와주는 도구가 바로 도커 컴포즈이다.
